<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>html5通知API的测试</title>
</head>
<body>
<button id="button">有人想加你为好友</button>
<p id="text"></p>
	<!-- <button onclick= "createNotice()">显示通知</button>
	<button onclick= "closeNotice()">关闭通知</button> -->
	<script>
	if (window.Notification) {
    var button = document.getElementById('button'), text = document.getElementById('text');
    
    var popNotice = function() {
        if (Notification.permission == "granted") {
            var notification = new Notification("Hi，帅哥：", {
                body: '可以加你为好友吗？',
                icon: 'http://image.zhangxinxu.com/image/study/s/s128/mm1.jpg'
            });
            
            notification.onclick = function() {
                text.innerHTML = '张小姐已于' + new Date().toTimeString().split(' ')[0] + '加你为好友！';
                notification.close();    
            };
        }    
    };
    
    button.onclick = function() {
        if (Notification.permission == "granted") {
            popNotice();
        } else if (Notification.permission != "denied") {
            Notification.requestPermission(function (permission) {
              popNotice();
            });
        }
    };
} else {
    alert('浏览器不支持Notification');    
}
		/*var noticeTest;
		function createNotice() {
			if(window.Notification.permission == "granted") {
				noticeTest = new Notification('简单文本通知');
				noticeTest.onshow() = function() {
					alert("111");
				}
				noticeTest.onclose() = function() {
					alert("222");
				}
			}
			else if(window.Notification.permission == "default") {
				window.Notification.requestPermission();
				
			}

		}
		function closeNotice() {
			noticeTest.close();
		}*/
	</script>
</body>
</html>